<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<title></title>
		<script type="text/javascript" src="js/jquery-3.4.1.min.js"></script>
		<script type="text/javascript" src="js/notiflix-1.9.1.js"></script>
		<script type="text/javascript" src="js/common.js"></script>
		<link rel="stylesheet" href="css/notiflix-1.9.1.css">
		<link rel="stylesheet" href="css/common.css">
		<link rel="stylesheet" href="css/achievement.css">
	</head>
	<body>
		<div class='title_div'>我的成就</div>
		<div class="achievement_div_outer">
			<div class="achievement_div_inner" id="achievement_div_inner0_0">
				<div class="achievement_div_content">完成第一章</div>
			</div>
			<div class="achievement_div_inner" id="achievement_div_inner0_1">
				<div class="achievement_div_content">50s内完成</div>
			</div>
			<div class="achievement_div_inner" id="achievement_div_inner0_2">
				<div class="achievement_div_content">?</div>
			</div>
		</div>
		<div class="achievement_div_outer">
			<div class="achievement_div_inner" id="achievement_div_inner1_0">
				<div class="achievement_div_content">完成第二章</div>
			</div>
			<div class="achievement_div_inner" id="achievement_div_inner1_1">
				<div class="achievement_div_content">150s内完成</div>
			</div>
			<div class="achievement_div_inner" id="achievement_div_inner1_2">
				<div class="achievement_div_content">?</div>
			</div>
		</div>
		<div class="achievement_div_outer">
			<div class="achievement_div_inner" id="achievement_div_inner2_0">
				<div class="achievement_div_content">完成第三章</div>
			</div>
			<div class="achievement_div_inner" id="achievement_div_inner2_1">
				<div class="achievement_div_content">300s内完成</div>
			</div>
			<div class="achievement_div_inner" id="achievement_div_inner2_2">
				<div class="achievement_div_content">?</div>
			</div>
		</div>
		<div class="achievement_div_outer">
			<div class="achievement_div_inner" id="achievement_div_inner3_0">
				<div class="achievement_div_content">完成第四章</div>
			</div>
			<div class="achievement_div_inner" id="achievement_div_inner3_1">
				<div class="achievement_div_content">450s内完成</div>
			</div>
			<div class="achievement_div_inner" id="achievement_div_inner3_2">
				<div class="achievement_div_content">?</div>
			</div>
		</div>
		<div class="achievement_div_outer">
			<div class="achievement_div_inner" id="achievement_div_inner4_0">
				<div class="achievement_div_content">完成第五章</div>
			</div>
			<div class="achievement_div_inner" id="achievement_div_inner4_1">
				<div class="achievement_div_content">750s内完成</div>
			</div>
			<div class="achievement_div_inner" id="achievement_div_inner4_2">
				<div class="achievement_div_content">?</div>
			</div>
		</div>
		<div class="achievement_div_outer">
			<div class="achievement_div_inner" id="achievement_div_inner5_0">
				<div class="achievement_div_content">完成第六章</div>
			</div>
			<div class="achievement_div_inner" id="achievement_div_inner5_1">
				<div class="achievement_div_content">1500s内完成</div>
			</div>
			<div class="achievement_div_inner" id="achievement_div_inner5_2">
				<div class="achievement_div_content">?</div>
			</div>
		</div>
	</body>

	<script type="text/javascript">
		document.addEventListener("plusready", function() {
			// 注册返回按键事件 
			plus.key.addEventListener('backbutton', function() {
				// 事件处理 
				window.location.href = 'index.html';
			}, false);
		});

		$(document).ready(function() {
			for (var i = 0; i < 6; i++) {
				var achievement = storage.getItem('achievement' + i);
				var achievement_hide = storage.getItem('achievement_hide' + i);
				if (achievement != undefined && achievement != '') {
					var lastNum = achievement.substring(achievement.length - 1);
					if (lastNum == '1') {
						var achievementPre = achievement.replace('_1', '_0');
						$('#achievement_div_inner' + achievementPre).css("background-image", "url(img/achievement/" + achievementPre +
							".png)");
						$('#achievement_div_inner' + achievement).css("background-image", "url(img/achievement/" + achievement +
							".png)");
						
						$('#achievement_div_inner' + achievement).children('.achievement_div_content').html('');
						$('#achievement_div_inner' + achievementPre).children('.achievement_div_content').html('');

						$('#achievement_div_inner' + achievementPre).css("background-size", "cover");
						$('#achievement_div_inner' + achievement).css("background-size", "cover");
					} else {
						$('#achievement_div_inner' + achievement).css("background-image", "url(img/achievement/" + achievement +
							".png)");
						$('#achievement_div_inner' + achievement).css("background-size", "cover");
						$('#achievement_div_inner' + achievement).children('.achievement_div_content').html('');
					}
				}

				if (achievement_hide != undefined && achievement_hide != null) {
					//$('#achievement_div_inner' + achievement_hide).css("background-image", "url(img/achievement/" + achievement +".png)");
					//$('#achievement_div_inner' + achievement_hide).css("background-size", "cover");
					$('#achievement_div_inner' + achievement_hide).children('.achievement_div_content').html('已解锁');
				}
			}
		});
		
		$("#achievement_div_inner3_0").on('click', function() {
			var finishFlag = storage.getItem('achievement3');
			if (finishFlag != undefined && finishFlag != null) {
				storage.setItem("achievement_hide3", "3_2");
				Notiflix.Report.Success('发现隐藏成就',
					'恭喜你发现了一个隐藏成就---她的星座', '确定');
				$("#NXReportButton").on('click', function() {
					window.location.reload();
				})
			}
		});
		
		$("#achievement_div_inner4_0").on('click', function() {
			var finishFlag = storage.getItem('achievement3');
			if (finishFlag != undefined && finishFlag != null) {
				storage.setItem("achievement_hide4", "4_2");
				Notiflix.Report.Success('发现隐藏成就',
					'恭喜你发现了一个隐藏成就---他的星座', '确定');
				$("#NXReportButton").on('click', function() {
					window.location.reload();
				})
			}
		});
	</script>
</html>
